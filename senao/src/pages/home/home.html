<ion-header no-border>
    <ion-navbar color="main">
      <ion-title><small>Home</small></ion-title>
      <ion-buttons end>
        <button ion-button clear class="refresh-button" (click)="doRefresh()"><ion-icon name="md-refresh" color="white"></ion-icon></button>
      </ion-buttons>
    </ion-navbar>
  </ion-header>
  <ion-content  class="ion-content-home">
    <div *ngIf="response == 'Success'">
      <div id="slider-divider">
        <div class="scrolling-wrapper">
          <ion-card class="slider" *ngFor="let sliderData of sliderData">
            <img onerror="this.onerror=null;this.src='assets/main/img_not_available.png';" src="https://cors-anywhere.herokuapp.com/http://jabarbasithme.com/senao/upload/foto/slider/{{ sliderData.foto }}"/>
          </ion-card>
        </div>
      </div>
    </div>
    <div *ngIf="response == 'Success'" class="title-top-courses">
      <h3>Top Courses</h3>
      <p style="font-size: 13px; white-space: normal; margin-top: -5px; text-align: center;">This is the top course by others like and recomendations for you</p>
    </div>
    <div *ngIf="response == 'Success'">
      <div id="top-courses-divider">
        <div class="scrolling-wrapper">
          <ion-card class="card-courses" *ngFor="let topCoursesData of topCoursesData" (click)="goToDetailCourses({ record: topCoursesData })">
            <img onerror="this.onerror=null;this.src='assets/main/img_not_available.png';" src="https://cors-anywhere.herokuapp.com/http://jabarbasithme.com/senao/upload/foto/mapel/{{ topCoursesData.foto }}" class="top-courses-image">
            <div id="title-courses">
              <p style="text-align: center; color: black; text-transform: capitalize; padding-top: 7%;"><strong>{{ topCoursesData.nama }}</strong></p>
            </div>
            <ion-grid>
              <ion-row>
                <ion-col col-6>
                  <div>
                    <div *ngIf="topCoursesData.suka > 0 && topCoursesData.tidaksuka > 0">
                      <button disabled ion-button clear icon-start><ion-icon name="md-thumbs-up" color="dark"></ion-icon><p style="color: #222; text-transform: none;"><strong>{{ topCoursesData.suka }}</strong></p></button>
                      <button disabled ion-button clear icon-start><ion-icon name="md-thumbs-down" color="dark"></ion-icon><p style="color: #222; text-transform: none;"><strong>{{ topCoursesData.tidaksuka }}</strong></p></button>
                    </div>
                    <div *ngIf="topCoursesData.suka == null && topCoursesData.tidaksuka == null">
                      <button disabled ion-button clear icon-start><ion-icon name="md-thumbs-up" color="dark"></ion-icon><p style="color: #222; text-transform: none;"><strong>0</strong></p></button>
                      <button disabled ion-button clear icon-start><ion-icon name="md-thumbs-down" color="dark"></ion-icon><p style="color: #222; text-transform: none;"><strong>0</strong></p></button>
                    </div>
                    <div *ngIf="topCoursesData.suka > 0 && topCoursesData.tidaksuka == null">
                      <button disabled ion-button clear icon-start><ion-icon name="md-thumbs-up" color="dark"></ion-icon><p style="color: #222; text-transform: none;"><strong>{{ topCoursesData.suka }}</strong></p></button>
                      <button disabled ion-button clear icon-start><ion-icon name="md-thumbs-down" color="dark"></ion-icon><p style="color: #222; text-transform: none;"><strong>0</strong></p></button>
                    </div>
                    <div *ngIf="topCoursesData.suka == null && topCoursesData.tidaksuka > 0">
                      <button disabled ion-button clear icon-start><ion-icon name="md-thumbs-up" color="dark"></ion-icon><p style="color: #222; text-transform: none;"><strong>0</strong></p></button>
                      <button disabled ion-button clear icon-start><ion-icon name="md-thumbs-down" color="dark"></ion-icon><p style="color: #222; text-transform: none;"><strong>{{ topCoursesData.tidaksuka }}</strong></p></button>
                    </div>
                  </div>
                </ion-col>
                <ion-col col-6>
                  <div>
                    <ng-container *ngIf="userid == 'undefined' || userid == null || userid == ''; then showNotLoginData; else showLoginData"></ng-container>
                    <ng-template #showNotLoginData>
                      <ng-container *ngIf="topCoursesData.jenis_pembayaran == 'BUY'; then showBuyDataWhereNotLogin; else showFreeDataWhereNotLogin"></ng-container>
                      <ng-template #showBuyDataWhereNotLogin>
                        <p style="text-align: right; color: #727272; text-transform: capitalize; padding-right: 3%; font-size: 10px; padding-top: 1%;">Start from</p>
                        <p style="text-align: right; color: #004570; text-transform: capitalize;padding-right: 3%; margin-top: -5px;"><strong>{{ topCoursesData.harga | currency:'IDR ':true:'1.2-2' }}</strong></p>
                      </ng-template>
                      <ng-template #showFreeDataWhereNotLogin>
                        <p style="text-align: right; color: #727272; text-transform: capitalize; padding-right: 3%; font-size: 10px; padding-top: 1%;">This course is</p>
                        <p style="text-align: right; color: #004570; text-transform: capitalize; padding-right: 3%; margin-top: -5px;"><strong>FREE</strong></p>
                      </ng-template>
                    </ng-template>
                    <ng-template #showLoginData>
                      <div *ngFor="let statusCourseTransactionByUser of courseTransactionData">
                        <div *ngIf="responseStatus == 'Found'">
                          <ng-container *ngIf="statusCourseTransactionByUser.id_siswa == userid && statusCourseTransactionByUser.id_mapel == topCoursesData.id; then sameuseriddata; else notsameuseriddata"></ng-container>
                          <ng-template #sameuseriddata>
                            <ng-container *ngIf="statusCourseTransactionByUser.status == 'Sudah Verifikasi'; then verifiedStatus; else notVerfiedStatus"></ng-container>
                            <ng-template #verifiedStatus>
                              <ng-container *ngIf="topCoursesData.jenis_pembayaran == 'BUY'; then showBuyDataWhereLoginSameUserID; else showFreeDataWhereLoginSameUserID"></ng-container>
                              <ng-template #showBuyDataWhereLoginSameUserID>
                                <p style="text-align: right; color: #727272; text-transform: capitalize; padding-right: 3%; font-size: 10px; padding-top: 1%;">Status</p>
                                <p style="text-align: right; color: #6ba743; text-transform: capitalize;padding-right: 3%; margin-top: -5px;"><strong>Purchased</strong></p>
                              </ng-template>
                              <ng-template #showFreeDataWhereLoginSameUserID>
                                <p style="text-align: right; color: #727272; text-transform: capitalize; padding-right: 3%; font-size: 10px; padding-top: 1%;">Status</p>
                                <p style="text-align: right; color: #6ba743; text-transform: capitalize; padding-right: 3%; margin-top: -5px;"><strong>Subscribed</strong></p>
                              </ng-template>
                            </ng-template>
                            <ng-template #notVerfiedStatus>
                              <ng-container *ngIf="topCoursesData.jenis_pembayaran == 'BUY'; then showBuyDataWhereLoginSameUserID; else showFreeDataWhereLoginSameUserID"></ng-container>
                              <ng-template #showBuyDataWhereLoginSameUserID>
                                <p style="text-align: right; color: #727272; text-transform: capitalize; padding-right: 3%; font-size: 10px; padding-top: 1%;">Status</p>
                                <p style="text-align: right; color: #cb3434; text-transform: capitalize;padding-right: 3%; margin-top: -5px;"><strong>Not Verified</strong></p>
                              </ng-template>
                              <ng-template #showFreeDataWhereLoginSameUserID>
                                <p style="text-align: right; color: #727272; text-transform: capitalize; padding-right: 3%; font-size: 10px; padding-top: 1%;">Status</p>
                                <p style="text-align: right; color: #cb3434; text-transform: capitalize; padding-right: 3%; margin-top: -5px;"><strong>Not Verified</strong></p>
                              </ng-template>
                            </ng-template>
                          </ng-template>
                          <ng-template #notsameuseriddata>
                            <ng-container *ngIf="topCoursesData.jenis_pembayaran == 'BUY'; then priceIsBuy; else priceIsFree"></ng-container>
                            <ng-template #priceIsBuy>
                              <p style="text-align: right; color: #727272; text-transform: capitalize; padding-right: 3%; font-size: 10px; padding-top: 1%;">Start from</p>
                              <p style="text-align: right; color: #004570; text-transform: capitalize;padding-right: 3%; margin-top: -5px;"><strong>{{ topCoursesData.harga | currency:'IDR ':true:'1.2-2' }}</strong></p>
                            </ng-template>
                            <ng-template #priceIsFree>
                              <p style="text-align: right; color: #727272; text-transform: capitalize; padding-right: 3%; font-size: 10px; padding-top: 1%;">This course is</p>
                              <p style="text-align: right; color: #004570; text-transform: capitalize; padding-right: 3%; margin-top: -5px;"><strong>FREE</strong></p>
                            </ng-template>
                          </ng-template>
                        </div>
                      </div>
                      <div *ngIf="responseStatus == 'NotFound'">
                        <ng-container *ngIf="topCoursesData.jenis_pembayaran == 'BUY'; then priceIsBuy; else priceIsFree"></ng-container>
                        <ng-template #priceIsBuy>
                          <p style="text-align: right; color: #727272; text-transform: capitalize; padding-right: 3%; font-size: 10px; padding-top: 1%;">Start from</p>
                          <p style="text-align: right; color: #004570; text-transform: capitalize;padding-right: 3%; margin-top: -5px;"><strong>{{ topCoursesData.harga | currency:'IDR ':true:'1.2-2' }}</strong></p>
                        </ng-template>
                        <ng-template #priceIsFree>
                          <p style="text-align: right; color: #727272; text-transform: capitalize; padding-right: 3%; font-size: 10px; padding-top: 1%;">This course is</p>
                          <p style="text-align: right; color: #004570; text-transform: capitalize; padding-right: 3%; margin-top: -5px;"><strong>FREE</strong></p>
                        </ng-template>
                      </div>
                    </ng-template>
                  </div>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-card>
          <ion-card class="card-courses" (click)="goToAllCourses()">
            <img src="assets/main/see_all_courses_background.jpg" class="image-see-all-courses">
            <div id="title-see-all-courses">
              <p style="text-align: center; color: black; text-transform: capitalize; padding-top: 7%;"><strong>See All Courses</strong></p>
            </div>
            <ion-grid>
              <ion-row>
                <ion-col col-6>
                  <div>
                    <div *ngIf="topCoursesData.suka > 0 && topCoursesData.tidaksuka > 0">
                      <button disabled ion-button clear icon-start></button>
                      <button disabled ion-button clear icon-start></button>
                    </div>
                    <div *ngIf="topCoursesData.suka == null && topCoursesData.tidaksuka == null">
                      <button disabled ion-button clear icon-start></button>
                      <button disabled ion-button clear icon-start></button>
                    </div>
                    <div *ngIf="topCoursesData.suka > 0 && topCoursesData.tidaksuka == null">
                      <button disabled ion-button clear icon-start></button>
                      <button disabled ion-button clear icon-start></button>
                    </div>
                    <div *ngIf="topCoursesData.suka == null && topCoursesData.tidaksuka > 0">
                      <button disabled ion-button clear icon-start></button>
                      <button disabled ion-button clear icon-start></button>
                    </div>
                  </div>
                </ion-col>
                <ion-col col-6>
                  <div>
                    <p style="text-align: right; color: transparent; text-transform: capitalize; padding-right: 3%; font-size: 10px; padding-top: 1%;">Start from</p>
                    <div *ngIf="topCoursesData.jenis_pembayaran == 'BUY'">
                      <p style="text-align: right; color: transparent; text-transform: capitalize;padding-right: 3%; margin-top: -5px;"><strong>{{ topCoursesData.harga | currency:'IDR ':true:'1.2-2' }}</strong></p>
                    </div>
                    <div *ngIf="topCoursesData.jenis_pembayaran == 'FREE'">
                      <p style="text-align: right; color: transparent; text-transform: capitalize;padding-right: 3%; margin-top: -5px;"><strong>FREE</strong></p>
                    </div>
                  </div>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-card>
        </div>
      </div>
    </div>
    <div *ngIf="response == 'Success'" class="title-top-courses">
      <h3>Testimonial</h3>
      <p style="font-size: 13px; white-space: normal; margin-top: -5px; text-align: center;">This is testimonial by user about <strong>Senao</strong></p>
    </div>
    <div *ngIf="response == 'Success'">
      <div id="testimonial-divider">
        <div id="slider-divider">
          <div class="scrolling-wrapper">
            <ion-card class="testimonial-slider" *ngFor="let testimonialData of testimonialData">
              <img onerror="this.onerror=null;this.src='assets/main/user.png';" src="https://cors-anywhere.herokuapp.com/http://jabarbasithme.com/senao/upload/foto/siswa/{{ testimonialData.foto }}" class="center-image-circle"/>
              <div>
                <ng-container *ngIf="userid == 'undefined' || userid == null || userid == ''; then usernotlogin; else userlogin"></ng-container>
                <ng-template #usernotlogin>
                  <p style="text-align: center; text-transform: none; color: #000; padding-top: 5%;"><strong>{{ testimonialData.nama_siswa }}</strong></p>
                  <ng-container *ngIf="testimonialData.testimoni == 'undefined' || testimonialData.testimoni == null || testimonialData.testimoni == ''; then showNoPost; else showPost"></ng-container>
                  <ng-template #showNoPost>
                    <p style="text-align: center; text-transform: none; color: #222; padding-bottom: 3%;">No Posts Yet</p>
                  </ng-template>
                  <ng-template #showPost>
                    <p style="text-align: center; text-transform: none; color: #222; padding-bottom: 3%; white-space: normal;">" {{ testimonialData.testimoni }} "</p>
                  </ng-template>
                </ng-template>
                <ng-template #userlogin>
                  <ng-container *ngIf="userid == testimonialData.id_siswa; then sameuserid; else notsameuserid"></ng-container>
                  <ng-template #sameuserid>
                    <p style="text-align: center; text-transform: none; color: #000; padding-top: 5%;"><strong>You</strong></p>
                    <ng-container *ngIf="testimonialData.testimoni == 'undefined' || testimonialData.testimoni == null || testimonialData.testimoni == ''; then showNoPost; else showPost"></ng-container>
                    <ng-template #showNoPost>
                      <p style="text-align: center; text-transform: none; color: #222; padding-bottom: 3%;">No Posts Yet</p>
                    </ng-template>
                    <ng-template #showPost>
                      <p style="text-align: center; text-transform: none; color: #222; padding-bottom: 3%; white-space: normal;">" {{ testimonialData.testimoni }} "</p>
                    </ng-template>
                  </ng-template>
                  <ng-template #notsameuserid>
                    <p style="text-align: center; text-transform: none; color: #000; padding-top: 5%;"><strong>{{ testimonialData.nama_siswa }}</strong></p>
                    <ng-container *ngIf="testimonialData.testimoni == 'undefined' || testimonialData.testimoni == null || testimonialData.testimoni == ''; then showNoPost; else showPost"></ng-container>
                    <ng-template #showNoPost>
                      <p style="text-align: center; text-transform: none; color: #222; padding-bottom: 3%;">No Posts Yet</p>
                    </ng-template>
                    <ng-template #showPost>
                      <p style="text-align: center; text-transform: none; color: #222; padding-bottom: 3%; white-space: normal;">" {{ testimonialData.testimoni }} "</p>
                    </ng-template>
                  </ng-template>
                </ng-template>
              </div>
            </ion-card>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="response == 'GettingData'">
      <div class="skeleton-loader">
        <ion-card class="skeleton-slider">
          <img class="p-0"/>
        </ion-card>
        <div class="title-top-courses">
          <img class="p-1"/>
          <img class="p-2"/>
        </div>
        <ion-card class="skeleton-card-courses">
          <img class="p-3">
        </ion-card>
      </div>
    </div>
    <div *ngIf="response == 'Failed'">
      <div id="data-not-found-image-middle-position">
        <img src="assets/main/data_not_found.png">
      </div>
    </div>
    <div *ngIf="response == 'Error'">
      <div id="data-error-image-middle-position">
        <img src="assets/main/new_rto_background.png">
        <button ion-button color="darkblue" class="button-response-action" (click)="ionViewWillEnter()"><p style="text-transform: capitalize;"><strong>Try Again</strong></p></button>
      </div>
    </div>
  </ion-content>